{% extends "base.html" %}

{% block title %}My Dashboard{% endblock %}

{% block content %}
<!-- Header -->
<div class="mb-4">
  <h1 class="display-6 fw-bold text-dark">Dashboard</h1>
  <p class="text-secondary">Manage and view your data.</p>
</div>

<!-- Success Message -->
{% if message %}
<div class="alert alert-success" role="alert">
  {{ message }}
</div>
{% endif %}

<!-- Data Table -->
{% if names %}
<div class="card shadow-sm">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="bg-light">
          <tr>
            <th scope="col" class="py-3 px-4">ID</th>
            <th scope="col" class="py-3 px-4">
              Timestamp
              <a href="?show=data&sort=timestamp_desc" class="ms-2 text-decoration-none">
                <i class="fas fa-arrow-down {% if sort == 'timestamp_desc' %}text-primary{% endif %}"></i>
              </a>
              <a href="?show=data&sort=timestamp_asc" class="ms-1 text-decoration-none">
                <i class="fas fa-arrow-up {% if sort == 'timestamp_asc' %}text-primary{% endif %}"></i>
              </a>
            </th>
            <th scope="col" class="py-3 px-4">Email Address</th>
            <th scope="col" class="py-3 px-4">Extension Title</th>
          </tr>
        </thead>
        <tbody>
          {% for row in names %}
          <tr>
            <td class="py-3 px-4"><a href="/dashboard/details/{{ row.id }}" class="link-primary">{{ row.id }}</a></td>
            <td class="py-3 px-4 text-secondary">{{ row.timestamp }}</td>
            <td class="py-3 px-4"><a href="/dashboard/agent_details/{{ row.email_address | urlencode }}"
                class="link-primary">{{ row.email_address }}</a></td>
            <td class="py-3 px-4 text-secondary">{{ row.extension_title }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endif %}
{% endblock %}
